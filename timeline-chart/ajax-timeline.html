
<link rel="import" href="timeline-chart.html" />
<dom-module id="ajax-timeline">

  <template>

      <iron-ajax
      auto
      method="get"
      id="jsoninfoid"
      url="timelinedesign.json"
      handle-as="json"
      content-type="application/json"
      on-response="jsoninfoResponse"
      last-response="{{jsondata}}"
      debounce-duration="300">
      </iron-ajax>
      <iron-ajax
            auto
            method="post"
            id="timelineajax"
            url="{{timelinerequesturl}}"
            handle-as="json"
            content-type="application/json"
            on-response="timelinedetails"
            debounce-duration="300">
      </iron-ajax>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'ajax-timeline',
	  ready:function(){
		   //alert("hi");
       this.timelinerequesturl="http://localhost:4000"+"/timelinefetch";
       this.$.timelineajax.generateRequest();
		  },

	  jsoninfoResponse:function(){
    var labeljsondata=this.jsondata;
    document.querySelector("timeline-chart").getJsondata(labeljsondata[0].goodsvehiclenumber,labeljsondata[0].goodsvehiclename,labeljsondata[0].goodsvehicleintime,labeljsondata[0].goodsvehicleouttime,labeljsondata[0].goodsvehicleindate,labeljsondata[0].goodsvehicleoutdate);
},
        // this.lorryin=labeljsondata[0].lorryinn;
         //this.lorryout=labeljsondata[1].lorryoutt;
         //this.loadin=labeljsondata[2].loadinn;
        // this.loadout=labeljsondata[3].loadoutt;






    });
  })();
  </script>
</dom-module>
