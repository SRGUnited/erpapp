<dom-module id="autogen-id">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>
    <p hidden>{{getstring}}</p>
    <!-- <paper-button raised on-click="generateid">Generate ID</paper-button> -->
    <iron-ajax
      id="autogen"
      method="post"
      url="http://localhost:4000/autogenerateid"
      handle-as="json"
      on-response="handleautogenerateid">
    </iron-ajax>
  </template>
</dom-module>
<script type="text/javascript">
  Polymer({
    is: "autogen-id",
    ready:function(){
      alert("autogen-id");
    },
    handleautogenerateid:function(e){
      alert("response"+e.detail.response.returnid)
      var getid=e.detail.response.returnid;
      if(this.getstring=="sup"){
        var supstringid="sup"+getid;
      document.querySelector("call-add-supplier").submitFn(supstringid);
    }
    if(this.getstring=="cus"){
      var cusstringid="cus"+getid;
      document.querySelector("call-add-customer").submitFn(cusstringid);
    }
      if(this.getstring=="ite"){
      var itestringid="ite"+getid;
     document.querySelector("item-details").save(itestringid);
    }
    },
    send:function(data){
      alert(data);
      this.getstring=data;
      this.$.autogen.generateRequest();
    }
  });
</script>
