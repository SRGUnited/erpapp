<dom-module id="supplier-to-additem">
  <template>
  <style>
    paper-dropdown-menu{
      --paper-dropdown-menu:{
      width: 100%;
    }
  }
  </style>
    <p>{{getsupplierid}}</p>
    <p hidden>{{totaljsonval}}</p>
    <p hidden>{{itemid}}</p>
    <paper-dropdown-menu label=" choose itemname">
      <paper-menu class="dropdown-content" attr-for-selected="value" selected="{{selectionname}}" on-click="getitemidFn">
        <template is="dom-repeat" items="{{itemnamedata}}">
          <paper-item value="{{item.itemname}}">{{item.itemname}}</paper-item>
        </template>
      </paper-menu>
    </paper-dropdown-menu>
    <div>
      <datetime-picker date-string="{{min}}"  min-date="[[max]]" use-not-native></datetime-picker>
    <!-- <paper-date-picker></paper-date-picker> -->
  </div>
    <paper-input label="Item Price" value="{{itempriceval}}"></paper-input>
    <center>
      <a class="btn btn-app" on-click="saveitemssupplierFn" style="margin-top:10px;">
                <i class="fa fa-save"></i>Save
      </a>
    </center>
    <iron-ajax
      auto
      method="post"
      url="http://localhost:4000/supplieritem_map"
      handle-as="json"
      on-response="sup_item_map_Response"></iron-ajax>
      <iron-ajax
        id="sup_to_item_map_id"
        method="post"
        params="{{itemmapparams}}"
        url="http://localhost:4000/supplieritempostinfo"
        handle-as="json"
        on-response="sup_item_post_Response"></iron-ajax>
  </template>
  <script>
  (function() {
     'use strict';
     var arr=[];
    Polymer({
      is:"supplier-to-additem",
      backtosupplierFn:function(){
        document.querySelector("home-page").FnSetPage("call-add-supplier");
      },
      sup_item_map_Response:function(e){
        var getdata=e.detail.response.returnval;
        this.totaljsonval=getdata;
        this.itemnamedata=getdata;
      },
      saveitemssupplierFn:function(){
        this.itemmapparams={supid:this.getsupplierid,
                            itemid:this.itemid};
        alert(this.getsupplierid);
        this.$.sup_to_item_map_id.generateRequest();
      },
      getitemidFn:function(){
        var data=this.totaljsonval;
        for(var i=0;i<=data.length;i++){
          if(data[i].itemname==this.selectionname){
            this.itemid=data[i].itemid;
          }
        }
      },
      sup_item_post_Response:function(e){
        alert(e.detail.response.returnval);
      }
    });
    })();
  </script>
</dom-module>
